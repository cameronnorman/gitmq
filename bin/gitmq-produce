#!/usr/bin/env ruby
# frozen_string_literal: true

require 'gitmq'

path = ARGV.shift
branch = ARGV.shift

producer = GitMQ::Producer.new(
  storage: GitMQ::Storage.new(path)
)

loop do
  producer.publish(branch, gets.strip)
rescue Interrupt
  puts 'Bye.'
  exit
end
